{"ast":null,"code":"import _toConsumableArray from\"C:/wamp64/www/AMAZONA/amazone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/wamp64/www/AMAZONA/amazone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from'react-redux';import Rating from\"../components/Rating\";import LoadingBox from\"../components/LoadingBox\";import MessageBox from\"../components/MessageBox\";import{Link,useParams}from\"react-router-dom\";import{detailsProduct}from\"../actions/productActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProductScreen(props){var _useParams=useParams(),id=_useParams.id;var dispatch=useDispatch();var productId=id;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var productDetails=useSelector(function(state){return state.productDetails;});var loading=productDetails.loading,error=productDetails.error,product=productDetails.product;console.log(product);useEffect(function(){dispatch(detailsProduct(productId));},[dispatch,productId]);return/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Retour\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-2\",children:/*#__PURE__*/_jsx(\"img\",{className:\"large\",src:product.product.image,alt:product.product.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"h1\",{children:product.product.name})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Rating,{rating:product.product.rating,numReviews:product.product.numReviews})}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Price: \",product.product.price]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Description:\",/*#__PURE__*/_jsx(\"p\",{children:product.product.description})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-body\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Price\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"price\",children:[\"$\",product.product.price]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"div\",{children:product.product.countInStock>0?/*#__PURE__*/_jsx(\"span\",{className:\"success\",children:\"En stock\"}):/*#__PURE__*/_jsx(\"span\",{className:\"danger\",children:\"Rupture de stock\"})})]})}),product.product.countInStock>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Qty\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"select\",{value:qty,onChange:function onChange(e){return setQty(e.target.value);},children:_toConsumableArray(Array(product.product.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/cart/\".concat(productId,\"?qty=\").concat(qty),children:/*#__PURE__*/_jsx(\"button\",{className:\"primary block\",children:\"Ajouter au panier\"})})})]})]})})})]})]})});}","map":{"version":3,"sources":["C:/wamp64/www/AMAZONA/amazone/frontend/src/screens/ProductScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Rating","LoadingBox","MessageBox","Link","useParams","detailsProduct","ProductScreen","props","id","dispatch","productId","qty","setQty","productDetails","state","loading","error","product","console","log","image","name","rating","numReviews","price","description","countInStock","e","target","value","Array","keys","map","x"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Rating from \"../components/Rating\";\r\nimport LoadingBox from \"../components/LoadingBox\";\r\nimport MessageBox from \"../components/MessageBox\";\r\nimport {Link, useParams} from \"react-router-dom\";\r\nimport {detailsProduct} from \"../actions/productActions\";\r\n\r\nexport default function ProductScreen(props){\r\n    const { id } = useParams();\r\n    const dispatch = useDispatch();\r\n    const productId = id;\r\n    const [qty, setQty] = useState(1);\r\n    const productDetails = useSelector((state) => state.productDetails);\r\n    const { loading, error, product } = productDetails;\r\n    console.log(product)\r\n    \r\n    useEffect(() =>{\r\n        dispatch(detailsProduct(productId));\r\n    }, [dispatch, productId]);\r\n\r\n    return (\r\n        <div>\r\n        {loading ? <LoadingBox/>\r\n        : error ? <MessageBox variant=\"danger\">{error}</MessageBox>\r\n        :( \r\n            <div>\r\n            <Link to=\"/\">Retour</Link>\r\n            <div className=\"row top\">\r\n                <div className=\"col-2\">\r\n                    <img className=\"large\" src={product.product.image} alt={product.product.name}/>\r\n                </div>\r\n                <div className=\"col-1\">\r\n                    <ul>\r\n                        <li>\r\n                            <h1>{product.product.name}</h1>\r\n                        </li>\r\n                        <li>\r\n                            <Rating \r\n                                rating={product.product.rating}\r\n                                numReviews={product.product.numReviews}\r\n                            />\r\n                        </li>\r\n                        <li>Price: {product.product.price}</li>\r\n                        <li>Description:\r\n                            <p>{product.product.description}</p>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div className=\"col-1\">\r\n                    <div className=\"card card-body\">\r\n                        <ul>\r\n                            <li>\r\n                                <div className=\"row\">\r\n                                    <div>Price</div>\r\n                                    <div className=\"price\">${product.product.price}</div>\r\n                                </div>\r\n                            </li>\r\n                            <li>\r\n                                <div className=\"row\">\r\n                                    <div>Status</div>\r\n                                    <div>{product.product.countInStock > 0?<span className=\"success\">En stock</span>:\r\n                                    <span className=\"danger\">Rupture de stock</span>}</div>\r\n                                </div>\r\n                            </li>\r\n                            {\r\n                                product.product.countInStock > 0 && (\r\n                                    <>\r\n                                    <li>\r\n                                        <div className=\"row\">\r\n                                            <div>Qty</div>\r\n                                            <div>\r\n                                                <select value={qty} onChange={e => setQty(e.target.value)}>\r\n                                                    {\r\n                                                        [...Array(product.product.countInStock).keys()].map(\r\n                                                            x => (\r\n                                                            <option key={x + 1} value={x +1}>{x +1}</option>\r\n                                                            )\r\n                                                        )\r\n                                                    }\r\n                                                </select>\r\n                                            </div>\r\n                                        </div>\r\n                                    </li>\r\n                                    <li>\r\n                                        <a href={`/cart/${productId}?qty=${qty}`}>\r\n                                            <button className=\"primary block\">\r\n                                                Ajouter au panier                                            \r\n                                            </button>\r\n                                        </a>\r\n                                    </li>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        )}\r\n      </div>\r\n   \r\n    )\r\n}   "]},"metadata":{},"sourceType":"module"}