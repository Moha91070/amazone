{"ast":null,"code":"import _toConsumableArray from\"C:/wamp64/www/AMAZONA/amazone/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from\"react\";import{Link,useLocation,useParams}from'react-router-dom';import{useDispatch,useSelector}from\"react-redux\";import{addToCart,removeFromCart}from\"../actions/cartActions\";import MessageBox from\"../components/MessageBox\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(props){var location=useLocation();var _useParams=useParams(),id=_useParams.id;var productId=id;var qty=location.search?Number(location.search.split('=')[1]):1;var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var dispatch=useDispatch();useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};return/*#__PURE__*/_jsxs(\"div\",{className:\"row top\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-2\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\" Go shopping\"})]}):/*#__PURE__*/_jsx(\"ul\",{children:cartItems.map(function(item){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"small\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"min-30\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"select\",{value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",item.price]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:\"Delete\"})})]})},item.product);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-body\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce(function(a,c){return a+c.qty;},0),\" items) : $\",cartItems.reduce(function(a,c){return a+c.price*c.qty;},0)]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/signin?redirect=shipping\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"primary block\",disabled:cartItems.length===0,children:\"Proceed to checkout\"})})})]})})})]});}","map":{"version":3,"sources":["C:/wamp64/www/AMAZONA/amazone/frontend/src/screens/CartScreen.js"],"names":["React","useEffect","Link","useLocation","useParams","useDispatch","useSelector","addToCart","removeFromCart","MessageBox","CartScreen","props","location","id","productId","qty","search","Number","split","cart","state","cartItems","dispatch","removeFromCartHandler","length","map","item","image","name","product","e","target","value","Array","countInStock","keys","x","price","reduce","a","c"],"mappings":"qKAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAAQC,IAAR,CAAcC,WAAd,CAA2BC,SAA3B,KAA2C,kBAA3C,CACA,OAAQC,WAAR,CAAqBC,WAArB,KAAuC,aAAvC,CACA,OAAQC,SAAR,CAAmBC,cAAnB,KAAwC,wBAAxC,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,C,wFAEA,cAAe,SAASC,CAAAA,UAAT,CAAoBC,KAApB,CAA2B,CACtC,GAAMC,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CACA,eAAeC,SAAS,EAAxB,CAAQS,EAAR,YAAQA,EAAR,CACA,GAAMC,CAAAA,SAAS,CAAGD,EAAlB,CACA,GAAME,CAAAA,GAAG,CAAGH,QAAQ,CAACI,MAAT,CACVC,MAAM,CAACL,QAAQ,CAACI,MAAT,CAAgBE,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAD,CADI,CAEV,CAFF,CAGA,GAAMC,CAAAA,IAAI,CAAGb,WAAW,CAAC,SAAAc,KAAK,QAAIA,CAAAA,KAAK,CAACD,IAAV,EAAN,CAAxB,CACA,GAAOE,CAAAA,SAAP,CAAoBF,IAApB,CAAOE,SAAP,CACA,GAAMC,CAAAA,QAAQ,CAAGjB,WAAW,EAA5B,CACAJ,SAAS,CAAC,UAAK,CACX,GAAGa,SAAH,CAAc,CACVQ,QAAQ,CAACf,SAAS,CAACO,SAAD,CAAYC,GAAZ,CAAV,CAAR,CACH,CACJ,CAJQ,CAIN,CAACO,QAAD,CAAWR,SAAX,CAAsBC,GAAtB,CAJM,CAAT,CAKA,GAAMQ,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACV,EAAD,CAAO,CACjCS,QAAQ,CAACd,cAAc,CAACK,EAAD,CAAf,CAAR,CACH,CAFD,CAIA,mBACI,aAAK,SAAS,CAAC,SAAf,wBACI,aAAK,SAAS,CAAC,OAAf,wBACI,qCADJ,CAEKQ,SAAS,CAACG,MAAV,GAAqB,CAArB,cACA,MAAC,UAAD,2CAA2B,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,0BAA3B,GADA,cAIG,oBAEQH,SAAS,CAACI,GAAV,CAAc,SAACC,IAAD,qBACV,iCACI,aAAK,SAAS,CAAC,KAAf,wBACI,kCACI,YAAK,GAAG,CAAEA,IAAI,CAACC,KAAf,CAAsB,GAAG,CAAED,IAAI,CAACE,IAAhC,CAAsC,SAAS,CAAC,OAAhD,EADJ,EADJ,cAII,YAAK,SAAS,CAAC,QAAf,uBACI,KAAC,IAAD,EAAM,EAAE,oBAAcF,IAAI,CAACG,OAAnB,CAAR,UAAuCH,IAAI,CAACE,IAA5C,EADJ,EAJJ,cAOI,kCACI,eACI,KAAK,CAAEF,IAAI,CAACX,GADhB,CAEI,QAAQ,CAAE,kBAACe,CAAD,QACNR,CAAAA,QAAQ,CACJf,SAAS,CAACmB,IAAI,CAACG,OAAN,CAAeZ,MAAM,CAACa,CAAC,CAACC,MAAF,CAASC,KAAV,CAArB,CADL,CADF,EAFd,UAQQ,mBAAIC,KAAK,CAACP,IAAI,CAACQ,YAAN,CAAL,CAAyBC,IAAzB,EAAJ,EAAqCV,GAArC,CACI,SAAAW,CAAC,qBACG,eAAoB,KAAK,CAAEA,CAAC,CAAE,CAA9B,UAAkCA,CAAC,CAAE,CAArC,EAAaA,CAAC,CAAG,CAAjB,CADH,EADL,CARR,EADJ,EAPJ,cAwBI,2BACKV,IAAI,CAACW,KADV,GAxBJ,cA2BI,kCACI,eAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAE,yBAAMd,CAAAA,qBAAqB,CAACG,IAAI,CAACG,OAAN,CAA3B,EAA/B,oBADJ,EA3BJ,GADJ,EAASH,IAAI,CAACG,OAAd,CADU,EAAd,CAFR,EANR,GADJ,cAmDI,YAAK,SAAS,CAAC,OAAf,uBACI,YAAK,SAAS,CAAC,gBAAf,uBACI,mCACI,iCACI,mCACeR,SAAS,CAACiB,MAAV,CAAiB,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAAGC,CAAC,CAACzB,GAAhB,EAAjB,CAAsC,CAAtC,CADf,eAEMM,SAAS,CAACiB,MAAV,CAAiB,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAAGC,CAAC,CAACH,KAAF,CAAUG,CAAC,CAACzB,GAA1B,EAAjB,CAAgD,CAAhD,CAFN,GADJ,EADJ,cAOI,iCACI,UAAG,IAAI,CAAC,2BAAR,uBACA,eAAQ,IAAI,CAAC,QAAb,CACQ,SAAS,CAAC,eADlB,CAEQ,QAAQ,CAAEM,SAAS,CAACG,MAAV,GAAqB,CAFvC,iCADA,EADJ,EAPJ,GADJ,EADJ,EAnDJ,GADJ,CA4EH","sourcesContent":["import React, {useEffect} from \"react\";\r\nimport {Link, useLocation, useParams} from 'react-router-dom';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {addToCart, removeFromCart} from \"../actions/cartActions\";\r\nimport MessageBox from \"../components/MessageBox\";\r\n\r\nexport default function CartScreen(props) {\r\n    const location = useLocation();\r\n    const { id } = useParams();\r\n    const productId = id;\r\n    const qty = location.search \r\n    ? Number(location.search.split('=')[1]) \r\n    : 1;\r\n    const cart = useSelector(state => state.cart);\r\n    const {cartItems} = cart;\r\n    const dispatch = useDispatch();\r\n    useEffect(() =>{\r\n        if(productId) {\r\n            dispatch(addToCart(productId, qty));\r\n        }\r\n    }, [dispatch, productId, qty]);\r\n    const removeFromCartHandler = (id) =>{\r\n        dispatch(removeFromCart(id));\r\n    };\r\n\r\n    return (\r\n        <div className=\"row top\">\r\n            <div className=\"col-2\">\r\n                <h1>Shopping cart</h1>\r\n                {cartItems.length === 0\r\n                ?<MessageBox>Cart is empty. <Link to=\"/\"> Go shopping</Link>\r\n                </MessageBox>\r\n                : (\r\n                    <ul>\r\n                        {\r\n                            cartItems.map((item) => (\r\n                                <li key={item.product}>\r\n                                    <div className=\"row\">\r\n                                        <div>\r\n                                            <img src={item.image} alt={item.name} className=\"small\"/>\r\n                                        </div>\r\n                                        <div className=\"min-30\">\r\n                                            <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                                        </div>\r\n                                        <div>\r\n                                            <select\r\n                                                value={item.qty}\r\n                                                onChange={(e) =>\r\n                                                    dispatch(\r\n                                                        addToCart(item.product, Number(e.target.value)\r\n                                                        ))\r\n                                                }>\r\n                                                {\r\n                                                    [...Array(item.countInStock).keys()].map(\r\n                                                        x => (\r\n                                                            <option key={x + 1} value={x +1}>{x +1}</option>\r\n                                                        )\r\n                                                    )\r\n                                                }\r\n                                            </select>\r\n                                        </div>\r\n                                        <div>\r\n                                           ${item.price}\r\n                                        </div>\r\n                                        <div>\r\n                                            <button type=\"button\" onClick={() => removeFromCartHandler(item.product)}>\r\n                                                Delete\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                </li>\r\n                            ))\r\n                        }\r\n                    </ul>\r\n                    )}\r\n            </div>\r\n            <div className=\"col-1\">\r\n                <div className=\"card card-body\">\r\n                    <ul>\r\n                        <li>\r\n                            <h2>\r\n                                Subtotal ({cartItems.reduce((a, c) => a + c.qty, 0)} items) :\r\n                                ${cartItems.reduce((a, c) => a + c.price * c.qty, 0)}\r\n                            </h2>\r\n                        </li>\r\n                        <li>\r\n                            <a href=\"/signin?redirect=shipping\">\r\n                            <button type=\"button\"\r\n                                    className=\"primary block\"\r\n                                    disabled={cartItems.length === 0}\r\n                            >\r\n                                Proceed to checkout\r\n                            </button>\r\n                            </a>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}